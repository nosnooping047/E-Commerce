{% extends 'conteudo.html' %}
{% load custom_filters %}
{% load static %}
{% block 'principal_1' %}
{% if tem_produtos %}
<!--h1 style="font-size: 18px; font-weight: 600; color: #3D3B40;">Nossos produtos</h1-->
<form action="{% url 'produtos' %}" method="POST">{% csrf_token %}
    <div class="container h-100">
      <div class="d-flex justify-content-center h-100">
        <div class="searchbar">
          <input class="search_input" type="text" name="buscarproduto" placeholder="Buscar na Zeus Tech">
          <button type="submit" class="search_button"><i class="fas fa-search"></i></button>
         
        </div>
      </div>
    </div>            
  </form>
    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5">
        {% for produto in produtos %}
        <form action="{% url 'produtos' %}" method="post">{% csrf_token %}
            <div class="col">
                <div class="card">   
                    <div class="quadrado_deixa_imagem_mesmo_tamanho">                           
                        <img class="card-img-top preto-branco"  src="{{ produto.imagem.url|add:' '|cut:'templates/' }}" alt="{{ produto.nome }} - Imagem do Produto">   
                    </div>                       
                    <div class="text-center card-title-hover">
                        <h2 class="card-title h5 h-md-4 clamp-lines logocab" style="font-size: 14px; margin-bottom: 2px;" data-content="{{ produto.nome }}" data-toggle="focus" title="{{ produto.nome }}">{{ produto.nome }}</h2>
                        {% if produto.valor_venda|formatar_moeda != produto.valor_venda|add:produto.desconto_venda|formatar_moeda %}
                        <p class="logocab" style="font-size: 12px; text-decoration: line-through; margin-bottom: 1px;">R$ {{ produto.valor_venda|add:produto.desconto_venda|formatar_moeda }}</p>
                        {% else %}
                        <p class="logocab" style="font-size: 12px; text-decoration: line-through; margin-bottom: 1px;">Abaixo do preço!</p>
                        {% endif %}
                        <h3 class="logocab" style="font-size: 20px; margin-bottom: 1px;">R$ {{ produto.valor_venda|formatar_moeda }}</h3>
                    </div>
                    <input type="hidden" name="produto_id" value="{{ produto.id }}">
                    <!--button type="submit" class="btn btn-lg btn-block font_pega" style="margin-left: 2%; margin-right: 2%; margin-bottom: 1%; background-color: #FA0644; border-color: #FA0644;" name="adicionar_carrinho">Aproveite agora!</button-->
                </div>
            </div>
        </form>
        {% endfor %}
    </div>
    {% if tem_produtos > 10 %}
    <nav aria-label="Page navigation">
        <ul class="pagination custom-pagination justify-content-center">
            {% if produtos.has_previous %}
                <li class="page-item">
                    <a class="page-link" href="?page=1" aria-label="First">
                        <span aria-hidden="true">&laquo;&laquo;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ produtos.previous_page_number }}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% endif %}
            {% for num in produtos.paginator.page_range %}
                <li class="page-item {% if num == produtos.number %}active{% endif %}">
                    <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                </li>
            {% endfor %}
            {% if produtos.has_next %}
                <li class="page-item">
                    <a class="page-link" href="?page={{ produtos.next_page_number }}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
                <li class="page-item">
                    <a class="page-link" href="?page={{ produtos.paginator.num_pages }}" aria-label="Last">
                        <span aria-hidden="true">&raquo;&raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
{% else %}
    <p class="text-center text-success" style="font-size: 1.5em;">Desculpe, no momento não há produtos disponíveis. Fique atento para futuras novidades!</p>
{% endif %}
{% endblock 'principal_1' %}